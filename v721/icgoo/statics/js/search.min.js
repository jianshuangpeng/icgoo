function getdata(t){$.get(t,function(t){t&&($("#loading").hide(),html=$(t),sup=$(html[0]).attr("id"),supps=$("#a_sups a").text(),Sup=sup.replace(sup.charAt(0),sup.charAt(0).toUpperCase()),link="<a href='javascript:void(0)' onclick='reset_sup(this)' class=''>"+Sup+"<SUP>X</SUP></a>",-1!=sup.indexOf("element14")?(Sup="Element14",link="<a href='javascript:void(0)' onclick='reset_sup(this)' class=''>"+Sup+"<SUP>X</SUP></a>",-1!=supps.indexOf("Element14")?(element=$(html).find(".result tbody tr"),$("div#element14").find(".result table tbody").append(element),divId=$("div#element14").attr("id"),sup=divId):($(html[0]).attr("id","element14"),$("#topcontainer").append(html),$("#a_sups").append(link)),init_price(sup),init_dc(),get_init_price(sup)):-1!=sup.indexOf("rs")?(Sup="Rs",link="<a href='javascript:void(0)' onclick='reset_sup(this)' class=''>"+Sup+"<SUP>X</SUP></a>",-1!=supps.indexOf("Rs")?(rs=$(html).find(".result tbody tr"),$("div#rs").find(".result table tbody").append(rs),divId=$("div#rs").attr("id"),sup=divId):($(html[0]).attr("id","rs"),$("#topcontainer").append(html),$("#a_sups").append(link)),init_price(sup),init_dc(),get_init_price(sup)):($("#topcontainer").append(html),$("#a_sups").append(link),init_price(sup),init_dc(),get_init_price(sup)),sup_len=$("#a_sups a").length,$("#total_count").text(sup_len-1))})}function show_detail(t,e){$("#partno_detail .word").find("p").html(e);var s=$(t).offset().left,a=$(t).offset().top;$("#partno_detail").css({left:s+10+"px",top:a+10+"px"}).show()}function hide_detail(){$("#partno_detail .word").find("p").html(""),$("#partno_detail").hide()}function qty_dowm(t,e,s,a,i){var n=$(a).next("input"),r=n.val(),p=parseInt(r)-parseInt(s),e=parseInt(e),t=parseInt(t),s=parseInt(s),o=p;if("false"==i)var l=$(a).parents("tr").find("span.stock_warning");else var l=$("#stock_warning");if(t>p&&(o=t,l.text("最小起订量为"+t).show(),setTimeout(function(){l.hide()},2e3)),p>e&&(o=e),o%parseInt(s)!=0){var d=parseInt(o/parseInt(s));o=parseInt(s)*d}return t>e?(l.show(),setTimeout(function(){l.hide()},2e3),!1):(n.val(o),void("false"==i&&get_price(a,o)))}function qty_up(t,e,s,a,i){var n=$(a).prev("input"),r=n.val(),e=parseInt(e),t=parseInt(t),s=parseInt(s),p=parseInt(r)+parseInt(s),o=p;if("false"==i)var l=$(a).parents("tr").find("span.stock_warning");else var l=$("#stock_warning");if(t>p&&(o=t),p>e&&(o=e,l.text("库存为"+e).show(),setTimeout(function(){l.hide()},2e3)),o%parseInt(s)!=0){var d=parseInt(o/parseInt(s));o=parseInt(s)*d}return t>e?(l.text("库存不足").show(),setTimeout(function(){l.hide()},2e3),!1):(n.val(o),void("false"==i&&get_price(a,o)))}function check_qty(t,e,s,a){var i=$(a).val(),i=parseInt(i),e=parseInt(e),t=parseInt(t),n=$(a).parents("tr").find("span.stock_warning"),r=n.length;if(0==r&&(n=$("#stock_warning")),i<parseInt(t)&&(i=t,n.text("最小起订量为"+t).show(),setTimeout(function(){n.hide()},2e3)),i>parseInt(e)&&(i=e,n.text("库存为"+e).show(),setTimeout(function(){n.hide()},2e3)),i%parseInt(s)!=0){var p=parseInt(i/parseInt(s));i=parseInt(s)*p}get_price(a,i),$(a).val(i)}function get_price(t,e){var s=$(t).parents("tr").find("td.price ul"),a=$(t).parents("tr").find("td.price p"),i=($(t).parents("div.supplier").attr("id"),s.find("li")),n=parseInt(i.eq(0).find("span").eq(0).html()),r=parseInt(i.eq(i.length-1).find("span").eq(0).html());e=parseInt(e);var p=0,o=0;n>=e?(p=$.trim(i.eq(0).find("span").eq(2).html()),o=$.trim(i.eq(0).find("span").eq(1).html()),p=parseFloat(p.replace("￥","")),o=parseFloat(o.replace("$","")),price=[p,o],i.eq(0).addClass("rc").siblings("li").removeClass("rc"),i.eq(0).addClass("bold").siblings("li").removeClass("bold")):e>r?(p=$.trim(i.eq(i.length-1).find("span").eq(2).html()),o=$.trim(i.eq(i.length-1).find("span").eq(1).html()),p=parseFloat(p.replace("￥","")),o=parseFloat(o.replace("$","")),price=[p,o],i.eq(i.length-1).addClass("rc").siblings("li").removeClass("rc"),i.eq(i.length-1).addClass("bold").siblings("li").removeClass("bold")):i.each(function(){var t=parseInt($(this).find("span").eq(0).html());e>=t&&(p=$.trim($(this).find("span").eq(2).html()),o=$.trim($(this).find("span").eq(1).html()),p=parseFloat(p.replace("￥","")),o=parseFloat(o.replace("$","")),$(this).addClass("rc").siblings("li").removeClass("rc"),$(this).addClass("bold").siblings("li").removeClass("bold"))}),p=p||parseFloat(0),o=o||parseFloat(0),totalDl=(p*e).toFixed(2),totalHk=(o*e).toFixed(4);var l=s.find("li.rc").length;if(1==l){var d=s.find("li.rc").index();d>2&&(i.show(),a.removeClass("open").addClass("to_close"))}$(t).parents("td").find("span.priceDl").html("￥"+totalDl),$(t).parents("td").find("span.priceHk").html("$"+totalHk)}function get_init_price(t){var e=$("#"+t);e.find("input[name='buy_qty']").each(function(){var t=$(this).val();get_price(this,t)})}function check_count(){$("#topcontainer .supplier").each(function(){var t=$(this).find("tr:visible").length;if(1==t){$(this).hide();var e=$(this).attr("id");e=e.replace(e.charAt(0),e.charAt(0).toUpperCase()),$("#a_sups a:contains("+e+")").hide()}})}function for_filter(t,e,s){var a=$(s).is(":checked"),t=$.trim(t),i=$(s).attr("name"),e=parseInt(e);a?("for_all"==i&&($("input[name='for_all']").prop("checked",!0),$("#topcontainer table tbody tr:has('td')").each(function(){t=t.toUpperCase();var e=$.trim($(this).find("td").eq(0).find("p").eq(0).text());t!=e&&$(this).is(":visible")&&$(this).addClass("not_all").hide()}),check_count()),"for_stock"==i&&($("input[name='for_stock']").prop("checked",!0),$("#topcontainer table tbody tr:has('td')").each(function(){var t=$.trim($(this).find("td").eq(2).text())||0,s=$(this).find("td:last").find("p").eq(2).html().split("：")[1],a=$(this).find("td:last").find("p").eq(3).html().split("：")[1];t=parseInt(t),s=parseInt(s),s=parseInt(s),a=parseInt(a),(e>t||s>e||e%a!=0)&&$(this).is(":visible")&&$(this).addClass("not_for_stock").hide()}),check_count())):("for_all"==i&&($("input[name='for_all']").prop("checked",!1),$("#topcontainer .supplier:hidden").show(),$("#a_sups a:hidden").show(),$("#topcontainer table tbody tr.not_all").removeClass("not_all").show(),check_count()),"for_stock"==i&&($("input[name='for_stock']").prop("checked",!1),$("#topcontainer .supplier:hidden").show(),$("#a_sups a:hidden").show(),$("#topcontainer table tbody tr.not_for_stock").removeClass("not_for_stock").show(),check_count()))}function reset_sup(t){var e=$(t).text().toLowerCase().replace("x",""),s=-1!=$(t).attr("class").indexOf("active"),a=-1!=$("#a_sups a").eq(0).attr("class").indexOf("active"),i=$(t).index(),n=$("#a_sups a.active").length;if(0==i){if(0==n)return;$(t).addClass("active").siblings("a").removeClass("active"),$("#topcontainer div.supplier").show(),check_count()}else s?1==n?($(t).removeClass("active"),$("#a_sups a").eq(0).addClass("active"),$("#topcontainer div.supplier").show()):($(t).removeClass("active"),$("#"+e).hide()):(a&&($("#a_sups a").eq(0).removeClass("active"),$("#topcontainer div.supplier").hide()),$(t).addClass("active"),$("#topcontainer").prepend($("#"+e)),$("#"+e).show())}var srcH=$(".container").offset().top;$(window).scroll(function(){var t=$(document).scrollTop();t>srcH?$("#search_float").slideDown(500):$("#search_float").slideUp()}),$(function(){$("input[name='for_all']").prop("checked",!1),$("input[name='for_stock']").prop("checked",!1)});